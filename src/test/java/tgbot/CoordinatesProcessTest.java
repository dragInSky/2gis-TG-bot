package tgbot;

import org.junit.jupiter.api.Assertions;
import org.junit.jupiter.api.Test;
import tgbot.processors.CoordinatesProcess;
import tgbot.structs.Coordinates;

class CoordinatesProcessTest {
    @Test
    void middleDistancePoint() {
        String response = "{\"query\":{\"points\":[{\"type\":\"walking\",\"x\":60.601828,\"y\":56.827249},{\"type\":\"walking\",\"x\":60.61258,\"y\":56.828401}],\"type\":\"jam\"},\"result\":[{\"algorithm\":\"with traffic jams\",\"begin_pedestrian_path\":{\"geometry\":{\"selection\":\"LINESTRING(60.601827 56.827249, 60.601647 56.827356, 60.601539 56.827371)\"}},\"end_pedestrian_path\":{\"geometry\":{\"selection\":\"LINESTRING(60.612595 56.828251, 60.612579 56.828400)\"}},\"filter_road_types\":[\"highway\"],\"id\":\"4649254902242384933\",\"maneuvers\":[{\"comment\":\"start\",\"icon\":\"start\",\"id\":\"7280681701309964534\",\"outcoming_path\":{\"distance\":24,\"duration\":7,\"geometry\":[{\"color\":\"ignore\",\"length\":43,\"selection\":\"LINESTRING(60.601539 56.827371, 60.601534 56.827367, 60.601517 56.827359, 60.601160 56.827321)\",\"style\":\"normal\"}],\"names\":[]},\"outcoming_path_comment\":\"20 m straight\",\"type\":\"begin\"},{\"comment\":\"Left turn onto ?????????\",\"icon\":\"crossroad_left\",\"id\":\"6860847513869855082\",\"outcoming_path\":{\"distance\":43,\"duration\":12,\"geometry\":[{\"color\":\"ignore\",\"length\":80,\"selection\":\"LINESTRING(60.601160 56.827321, 60.601235 56.827114, 60.601301 56.826933)\",\"style\":\"normal\"}],\"names\":[\"?????????\"]},\"outcoming_path_comment\":\"40 m straight\",\"turn_angle\":-87,\"turn_direction\":\"left\",\"type\":\"crossroad\"},{\"comment\":\"Left turn onto ?????????\",\"icon\":\"crossroad_left\",\"id\":\"5134271609537467887\",\"outcoming_path\":{\"distance\":953,\"duration\":344,\"geometry\":[{\"color\":\"normal\",\"length\":463,\"selection\":\"LINESTRING(60.601301 56.826933, 60.601630 56.826969, 60.602282 56.827040, 60.602531 56.827074, 60.602858 56.827120, 60.603281 56.827149, 60.603480 56.827162, 60.603856 56.827187, 60.604280 56.827234, 60.604774 56.827288, 60.605388 56.827355)\",\"style\":\"normal\"},{\"color\":\"normal\",\"length\":65,\"selection\":\"LINESTRING(60.605388 56.827355, 60.605967 56.827418)\",\"style\":\"bridge\"},{\"color\":\"normal\",\"length\":172,\"selection\":\"LINESTRING(60.605967 56.827418, 60.606604 56.827487, 60.607484 56.827584)\",\"style\":\"normal\"},{\"color\":\"slow\",\"length\":229,\"selection\":\"LINESTRING(60.607484 56.827584, 60.608271 56.827669, 60.608834 56.827731, 60.609506 56.827804)\",\"style\":\"normal\"},{\"color\":\"normal\",\"length\":518,\"selection\":\"LINESTRING(60.609506 56.827804, 60.609750 56.827831, 60.610930 56.827960, 60.611735 56.828047, 60.611859 56.828061, 60.613096 56.828196, 60.613205 56.828208, 60.614075 56.828303)\",\"style\":\"normal\"},{\"color\":\"slow\",\"length\":312,\"selection\":\"LINESTRING(60.614075 56.828303, 60.614697 56.828371, 60.615263 56.828432, 60.615412 56.828449, 60.615673 56.828477, 60.616391 56.828555, 60.616606 56.828579, 60.616830 56.828603)\",\"style\":\"normal\"}],\"names\":[\"?????????\"]},\"outcoming_path_comment\":\"1 km straight\",\"turn_angle\":-90,\"turn_direction\":\"left\",\"type\":\"crossroad\"},{\"comment\":\"Left turn onto ??????????\",\"icon\":\"crossroad_left\",\"id\":\"6076900426080940921\",\"outcoming_path\":{\"distance\":13,\"duration\":4,\"geometry\":[{\"color\":\"normal\",\"length\":25,\"selection\":\"LINESTRING(60.616830 56.828603, 60.616878 56.828663, 60.616902 56.828721)\",\"style\":\"normal\"}],\"names\":[\"??????????\"]},\"outcoming_path_comment\":\"10 m straight\",\"turn_angle\":-61,\"turn_direction\":\"left\",\"type\":\"crossroad\"},{\"comment\":\"Sharp left turn onto ?????????\",\"icon\":\"crossroad_sharply_left\",\"id\":\"15683171729507914444\",\"outcoming_path\":{\"distance\":265,\"duration\":81,\"geometry\":[{\"color\":\"normal\",\"length\":488,\"selection\":\"LINESTRING(60.616902 56.828721, 60.615634 56.828582, 60.615375 56.828554, 60.614194 56.828426, 60.613169 56.828313, 60.613058 56.828302, 60.612595 56.828251)\",\"style\":\"normal\"}],\"names\":[\"?????????\"]},\"outcoming_path_comment\":\"250 m straight\",\"turn_angle\":-119,\"turn_direction\":\"sharply_left\",\"type\":\"crossroad\"},{\"comment\":\"finish\",\"icon\":\"finish\",\"id\":\"9219664178426063620\",\"outcoming_path_comment\":\"You have arrived!\",\"type\":\"end\"}],\"reliability\":1.0,\"route_id\":\"ekb-cr-mosesd.m9/carrouting/1671187251.835\",\"total_distance\":1298,\"total_duration\":448,\"type\":\"carrouting\",\"ui_total_distance\":{\"unit\":\"km\",\"value\":\"1.3\"},\"ui_total_duration\":\"7 min\",\"waypoints\":[{\"original_point\":{\"lat\":56.82737139931999,\"lon\":60.6015394242859},\"projected_point\":{\"lat\":56.82737139931999,\"lon\":60.6015394242859},\"transit\":false},{\"original_point\":{\"lat\":56.82825171072251,\"lon\":60.61259588880285},\"projected_point\":{\"lat\":56.82825171072251,\"lon\":60.61259588880285},\"transit\":false}]}],\"status\":\"OK\",\"type\":\"result\"}\n";
        CoordinatesProcess coordinatesProcess =
                new CoordinatesProcess(response, new Coordinates(56.827249, 60.601828));
        Assertions.assertEquals(new Coordinates(56.82796, 60.61093), coordinatesProcess.middleDistancePoint());
    }
}